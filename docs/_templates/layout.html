{% extends '!layout.html' %}


{% block footer %}
    {{ super() }}
    <!-- Return to Top -->
    <a href="javascript:" id="topchik"><i class="icon-chevron-up"></i></a>
    <!-- ICON NEEDS FONT AWESOME FOR CHEVRON UP ICON -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <!-- А це пам"ятник JS-->
    <script>
     $(window).scroll(function() {
        if ($(this).scrollTop() >= 50) {        // If page is scrolled more than 50px
        $('#topchik').fadeIn(200);    // Fade in the arrow
        } else {
        $('#topchik').fadeOut(200);   // Else fade out the arrow
        }
        });
        $('#topchik').click(function() {      // When arrow is clicked
        $('body,html').animate({
        scrollTop : 0                       // Scroll to top of body
        }, 500);
        });
    </script>
    <!-- Да это же onesignal -->
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script>
    var OneSignal = window.OneSignal || [];
    OneSignal.push(function() {
        OneSignal.init({
        appId: "7c291f92-d5bd-4792-9f98-545495146fd4",
        });
    });
    </script>
    <!-- Для авторизации на сайте = Latest CDN production Javascript and CSS -->
<!-- widget stuff here -->
<script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/js/okta-sign-in.min.js" type="text/javascript"></script>
<link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/css/okta-sign-in.min.css" type="text/css" rel="stylesheet"/>
<link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.16.0/css/okta-theme.css" type="text/css" rel="stylesheet"/>

    <!-- Костыльная  авторизация -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <title>Simple Web Page</title>
    <style>
      h1 {
        margin: 2em 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">Simple Web Page</h1>
      <div id="messageBox" class="jumbotron">
        You are not logged in. Get outta here! Shoo! >:S
      </div>
    </div>
  </body>
</html>
<!-- use the Okta widget to power authentication! -->
<script type="text/javascript">
    var oktaSignIn = new OktaSignIn({
      baseUrl: "https://dev-366824.okta.com",
      clientId: "0oa12yuctH71358mS4x6",
      authParams: {
        issuer: "https://dev-366824.okta.com/oauth2/default",
        responseType: ['token', 'id_token'],
        display: 'page'
      }
    });
  
    if (oktaSignIn.token.hasTokensInUrl()) {
      oktaSignIn.token.parseTokensFromUrl(
        // If we get here, the user just logged in.
        function success(res) {
          var accessToken = res[0];
          var idToken = res[1];
  
          oktaSignIn.tokenManager.add('accessToken', accessToken);
          oktaSignIn.tokenManager.add('idToken', idToken);
  
          window.location.hash='';
          document.getElementById("messageBox").innerHTML = "Hello, " + idToken.claims.email + "! You just logged in! :)";
        },
        function error(err) {
          console.error(err);
        }
      );
    } else {
      oktaSignIn.session.get(function (res) {
        // If we get here, the user is already signed in.
        if (res.status === 'ACTIVE') {
          document.getElementById("messageBox").innerHTML = "Hello, " + res.login + "! You are *still* logged in! :)";
          return;
        }
        oktaSignIn.renderEl(
          { el: '#okta-login-container' },
          function success(res) {},
          function error(err) {
            console.error(err);
          }
        );
      });
    }
  </script>
{% endblock %}

